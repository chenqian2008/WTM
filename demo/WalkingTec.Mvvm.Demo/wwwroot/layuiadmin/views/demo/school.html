<title>学校管理</title><div class="layui-card layadmin-header"><div class="layui-breadcrumb" lay-filter="breadcrumb"><a lay-href="">主页</a> <a><cite>Sample</cite></a> <a><cite>School</cite></a></div></div><div><form id="wtForm_e985182b89284190982aadc5fdd3f7ae" class="layui-form" method="post" lay-filter="wtForm_e985182b89284190982aadc5fdd3f7aeform" action="/School/Index?v=1.2.1"><div class="layui-collapse" style="margin-bottom:5px" lay-filter="b060612cb93a4d33a9f5fdfef6a78360"><div class="layui-colla-item"><h2 class="layui-colla-title">搜索条件<div style="text-align:right;margin-top:-43px" id="b060612cb93a4d33a9f5fdfef6a78360"><a href="javascript:void(0)" class="layui-btn layui-btn-sm" id="wtSearchBtn_e985182b89284190982aadc5fdd3f7ae"><i class="layui-icon">&#xe615;</i>搜索</a> <button type="reset" class="layui-btn layui-btn-sm" id="wtResetBtn_e985182b89284190982aadc5fdd3f7ae">重置</button></div></h2><div class="layui-colla-content layui-show"><div class="layui-row"><div class="layui-col-md4"><div class="layui-form-item"><label for="SchoolListVM_Searcher_SchoolCode" class="layui-form-label">学校编码:</label><div class="layui-input-block"><input type="text" name="Searcher.SchoolCode" placeholder="" class="layui-input" id="SchoolListVM_Searcher_SchoolCode" lay-filter="SchoolListVM_Searcher_SchoolCodefilter"></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="SchoolListVM_Searcher_SchoolName" class="layui-form-label">学校名称:</label><div class="layui-input-block"><input type="text" name="Searcher.SchoolName" placeholder="" class="layui-input" id="SchoolListVM_Searcher_SchoolName" lay-filter="SchoolListVM_Searcher_SchoolNamefilter"></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="SchoolListVM_Searcher_SchoolType" class="layui-form-label">学校类型:</label><div class="layui-input-block"><select name="Searcher.SchoolType" lay-filter="Searcher.SchoolType" wtm-name="Searcher.SchoolType" id="SchoolListVM_Searcher_SchoolType"><option value="">全部</option><option value="0">公立学校</option><option value="1">私立学校</option></select></div></div></div></div></div></div></div></form></div><script>layui.element.init(),$("#b060612cb93a4d33a9f5fdfef6a78360 .layui-btn").on("click",function(e){e.stopPropagation()}),$("#wtResetBtn_e985182b89284190982aadc5fdd3f7ae").on("click",function(e){var a=$("#"+this.form.id+" input[wtm-tag=wtmselector]");if(a&&0<a.length)for(i=0;i<a.length;i++)a[i].remove()}),$("#wtSearchBtn_e985182b89284190982aadc5fdd3f7ae").on("click",function(){layui.layer;table.reload("wtTable_e985182b89284190982aadc5fdd3f7ae",{where:$.extend(wtVar_e985182b89284190982aadc5fdd3f7ae.config.where,ff.GetSearchFormData("wtForm_e985182b89284190982aadc5fdd3f7ae","")),done:function(e,a,i){if(null==this.height){var t=$("#wtTable_e985182b89284190982aadc5fdd3f7ae + .layui-table-view");t.css("overflow","hidden").addClass("donotuse_fill donotuse_pdiv"),t.children(".layui-table-box").addClass("donotuse_fill donotuse_pdiv").css("height","100px"),t.find(".layui-table-main").addClass("donotuse_fill"),t.find(".layui-table-header").css("min-height","40px"),ff.triggerResize()}}})}),layui.element.on("collapse(b060612cb93a4d33a9f5fdfef6a78360)",function(e){ff.triggerResize()})</script><script>layui.use(["form"],function(){layui.form.render(null,"wtForm_e985182b89284190982aadc5fdd3f7aeform");for(var e=$(".layui-form[lay-filter='wtForm_e985182b89284190982aadc5fdd3f7aeform'] select[wtm-combo='MULTI_COMBO']"),a=0;a<e.length;a++){var r=e[a].attributes["lay-filter"].value,t=[],l=$('input[name="'+r+'"]');for(a=0;a<l.length;a++)t.push({name:l[a].attributes.text.value,val:l[a].value});formSelects.on({layFilter:r,left:"",right:"",separator:",",arr:t,selectFunc:null})}})</script><div style="text-align:right;padding-bottom:10px;padding-top:5px;margin-right:15px"><a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolCreate"})' class="layui-btn layui-btn-sm"><i class="layui-icon layui-icon-add-1"></i>新建</a> <a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolEdit"})' class="layui-btn layui-btn-sm"><i class="layui-icon layui-icon-edit"></i>修改</a> <a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolCreate2"})' class="layui-btn layui-btn-sm"><i></i>主子表新建</a> <a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolEdit2"})' class="layui-btn layui-btn-sm"><i></i>主子表修改</a> <a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolImport"})' class="layui-btn layui-btn-sm"><i class="layui-icon layui-icon-templeate-1"></i>导入</a> <a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"_FrameworkGetExportExcel"})' class="layui-btn layui-btn-sm"><i class="layui-icon layui-icon-download-circle"></i>导出Excel</a><button type="button" class="layui-btn layui-btn-sm layui-unselect layui-form-select downpanel" style="z-index:10" id="btn_3d67ac05-268a-49a5-b815-a48457a5acec"><div class="layui-select-title" style="padding-right:20px">批量处理 <i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit" style="top:initial;padding:1px 0 0 0"><dd style="padding:0 0;margin-bottom:1px;line-height:initial"><a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolBatchEdit"})' class="layui-btn layui-btn-sm" style="width:100%"><i class="layui-icon layui-icon-edit"></i>批量修改</a></dd><dd style="padding:0 0;margin-bottom:1px;line-height:initial"><a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_e985182b89284190982aadc5fdd3f7ae({event:"SchoolBatchDelete"})' class="layui-btn layui-btn-sm" style="width:100%"><i class="layui-icon layui-icon-delete"></i>批量删除</a></dd></dl></button><script>layui.use(["form"],function(){layui.form;var t=layui.jquery;t(".downpanel").on("click",".layui-select-title",function(e){t(".layui-form-select").not(t(this).parents(".layui-form-select")).removeClass("layui-form-selected"),t(this).parents(".layui-form-select").toggleClass("layui-form-selected"),e.stopPropagation()}),t(document).click(function(e){var l=t(".downpanel");l.is(e.target)||0!==l.has(e.target).length||l.removeClass("layui -form-selected")})})</script></div><table id="wtTable_e985182b89284190982aadc5fdd3f7ae" lay-filter="wtTable_e985182b89284190982aadc5fdd3f7ae"></table><script>layui.use(["table"],function(){var a=layui.table,t=(layui.layer,{elem:"#wtTable_e985182b89284190982aadc5fdd3f7ae",id:"wtTable_e985182b89284190982aadc5fdd3f7ae",autoSort:!1,totalRow:!1,url:"/_Framework/GetPagingData",where:{_DONOT_USE_VMNAME:"WalkingTec.Mvvm.Demo.ViewModels.SchoolVMs.SchoolListVM, WalkingTec.Mvvm.Demo",_DONOT_USE_CS:"default",SearcherMode:0,"Searcher.SchoolCode":null,"Searcher.SchoolName":null,"Searcher.SchoolType":null,"Searcher.ParentId":null,"Searcher.IsValid":null,"Searcher.Session":{SessionId:"f558d395-5687-fd7a-ab5a-06b4d07e5677"}},method:"post",loading:!0,request:{pageName:"Searcher.Page",limitName:"Searcher.Limit"},response:{statusName:"Code",statusCode:200,msgName:"Msg",countName:"Count",dataName:"Data"},page:!0,limit:20,limits:[10,20,50,80,100,150,200],height:"full-278",cols:[[{type:"checkbox",width:45,rowspan:1,fixed:"left",align:"center",totalRowText:"合计："},{type:"numbers",width:45,rowspan:1,fixed:"left",align:"center"},{field:"SchoolCode",title:"学校编码",align:"left",templet:function(e){var l="",o="",a="SchoolCode_"+e.LAY_INDEX;return null!=e.SchoolCode__bgcolor&&(o="<script>$('#"+a+"').closest('td').css('background-color','"+e.SchoolCode__bgcolor+"');<\/script>"),null!=e.SchoolCode__forecolor&&(l="color:"+e.SchoolCode__forecolor+";"),'<div style="'+l+'" id="'+a+'">'+e.SchoolCode.replace(/\"/g,"'")+o+"</div>"}},{field:"SchoolName",title:"学校名称",align:"left",templet:function(e){var l="",o="",a="SchoolName_"+e.LAY_INDEX;return null!=e.SchoolName__bgcolor&&(o="<script>$('#"+a+"').closest('td').css('background-color','"+e.SchoolName__bgcolor+"');<\/script>"),null!=e.SchoolName__forecolor&&(l="color:"+e.SchoolName__forecolor+";"),'<div style="'+l+'" id="'+a+'">'+e.SchoolName.replace(/\"/g,"'")+o+"</div>"}},{field:"SchoolType",title:"学校类型",align:"center",templet:function(e){var l="",o="",a="SchoolType_"+e.LAY_INDEX;return null!=e.SchoolType__bgcolor&&(o="<script>$('#"+a+"').closest('td').css('background-color','"+e.SchoolType__bgcolor+"');<\/script>"),null!=e.SchoolType__forecolor&&(l="color:"+e.SchoolType__forecolor+";"),'<div style="'+l+'" id="'+a+'">'+e.SchoolType.replace(/\"/g,"'")+o+"</div>"}},{field:"test",title:"测试",align:"center",templet:function(e){var l="",o="",a="test_"+e.LAY_INDEX;return null!=e.test__bgcolor&&(o="<script>$('#"+a+"').closest('td').css('background-color','"+e.test__bgcolor+"');<\/script>"),null!=e.test__forecolor&&(l="color:"+e.test__forecolor+";"),'<div style="'+l+'" id="'+a+'">'+e.test.replace(/\"/g,"'")+o+"</div>"}},{field:"Remark",title:"备注",align:"left",templet:function(e){var l="",o="",a="Remark_"+e.LAY_INDEX;return null!=e.Remark__bgcolor&&(o="<script>$('#"+a+"').closest('td').css('background-color','"+e.Remark__bgcolor+"');<\/script>"),null!=e.Remark__forecolor&&(l="color:"+e.Remark__forecolor+";"),'<div style="'+l+'" id="'+a+'">'+e.Remark.replace(/\"/g,"'")+o+"</div>"}},{toolbar:"#wtToolBar_e985182b89284190982aadc5fdd3f7ae",title:"操作",width:500,fixed:"right",align:"center"}]],even:!0,done:function(e,l,o){}});wtVar_e985182b89284190982aadc5fdd3f7ae=a.render(t),a.on("tool(wtTable_e985182b89284190982aadc5fdd3f7ae)",function(e){var l=e.data,o=e.event;switch(e.tr,o){case"SchoolCreate":var a=!1,t="/School/Create?1=1",c=[];ff.OpenDialog(t,"f097c6a884a149b88ae091ec822777d6","新建",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolEdit":if(a=!1,t="/School/Edit?1=1",c=[],null==l||null==l||null==l.ID||null==l.ID){if(0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请选择一行");if(1<d.length)return void layui.layer.msg("最多只能选择一行");t=t+"&id="+d[0],null!=(r=ff.GetSelectionData("wtTable_e985182b89284190982aadc5fdd3f7ae"))&&0<r.length&&(t=ff.concatWhereStr(t,c,r[0]))}else t=t+"&id="+l.ID,t=ff.concatWhereStr(t,c,l);ff.OpenDialog(t,"33c75483ebc64b6f8bf5d590426ee25a","修改",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolDelete":if(a=!1,t="/School/Delete?1=1",c=[],null==l||null==l||null==l.ID||null==l.ID){if(0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请选择一行");if(1<d.length)return void layui.layer.msg("最多只能选择一行");t=t+"&id="+d[0],null!=(r=ff.GetSelectionData("wtTable_e985182b89284190982aadc5fdd3f7ae"))&&0<r.length&&(t=ff.concatWhereStr(t,c,r[0]))}else t=t+"&id="+l.ID,t=ff.concatWhereStr(t,c,l);ff.OpenDialog(t,"3e42feede9c647288f8107d256246c24","删除",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolDetails":if(a=!1,t="/School/Details?1=1",c=[],null==l||null==l||null==l.ID||null==l.ID){if(0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请选择一行");if(1<d.length)return void layui.layer.msg("最多只能选择一行");t=t+"&id="+d[0],null!=(r=ff.GetSelectionData("wtTable_e985182b89284190982aadc5fdd3f7ae"))&&0<r.length&&(t=ff.concatWhereStr(t,c,r[0]))}else t=t+"&id="+l.ID,t=ff.concatWhereStr(t,c,l);ff.OpenDialog(t,"9c08f3775a574532b66884f3dcf222bf","详细",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolCreate2":a=!1,t="/School/Create2?1=1",c=[],ff.OpenDialog(t,"aeb92c2c977448d985d854a194c2c505","主子表新建",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolEdit2":if(a=!1,t="/School/Edit2?1=1",c=[],null==l||null==l||null==l.ID||null==l.ID){var r;if(0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请选择一行");if(1<d.length)return void layui.layer.msg("最多只能选择一行");t=t+"&id="+d[0],null!=(r=ff.GetSelectionData("wtTable_e985182b89284190982aadc5fdd3f7ae"))&&0<r.length&&(t=ff.concatWhereStr(t,c,r[0]))}else t=t+"&id="+l.ID,t=ff.concatWhereStr(t,c,l);ff.OpenDialog(t,"4b6dcd3c53304021ab61796ce76d6479","主子表修改",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolImport":a=!1,t="/School/Import?1=1",c=[],ff.OpenDialog(t,"97c1c2a1857747709a78d3fbe46805dc","导入",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"_FrameworkGetExportExcel":a=!1,t="/_Framework/GetExportExcel?1=1&_DONOT_USE_VMNAME=WalkingTec.Mvvm.Demo.ViewModels.SchoolVMs.SchoolListVM, WalkingTec.Mvvm.Demo",c=null;var d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae");a=!0,ff.DownloadExcelOrPdf(t,"wtForm_e985182b89284190982aadc5fdd3f7ae",{_DONOT_USE_VMNAME:"WalkingTec.Mvvm.Demo.ViewModels.SchoolVMs.SchoolListVM, WalkingTec.Mvvm.Demo",_DONOT_USE_CS:"default",SearcherMode:0,"Searcher.SchoolCode":null,"Searcher.SchoolName":null,"Searcher.SchoolType":null,"Searcher.ParentId":null,"Searcher.IsValid":null,"Searcher.Session":{SessionId:"f558d395-5687-fd7a-ab5a-06b4d07e5677"}},d);break;case"SchoolBatchEdit":if(t="/School/BatchEdit?1=1",a=!(a=!(c=[])),0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请至少选择一行");ff.OpenDialog(t,"2b10a32ec0e849f291a083d6b12911fc","批量修改",800,null,!0===a&&null!=d?{Ids:d}:void 0);break;case"SchoolBatchDelete":if(t="/School/BatchDelete?1=1",a=!(a=!(c=[])),0==(d=ff.GetSelections("wtTable_e985182b89284190982aadc5fdd3f7ae")).length)return void layui.layer.msg("请至少选择一行");ff.OpenDialog(t,"f0a3a72d31e84fa2a7ca1c0cba3795f5","批量删除",800,null,!0===a&&null!=d?{Ids:d}:void 0)}}),a.on("sort(wtTable_e985182b89284190982aadc5fdd3f7ae)",function(e){var l={};l["Searcher.SortInfo.Property"]=e.field,l["Searcher.SortInfo.Direction"]=e.type.replace(e.type[0],e.type[0].toUpperCase());var o=$.extend(t.where,l);a.reload("wtTable_e985182b89284190982aadc5fdd3f7ae",{initSort:e,where:o})})})</script><script type="text/html" id="wtToolBar_e985182b89284190982aadc5fdd3f7ae"><a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="SchoolEdit">修改</a><a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="SchoolDelete">删除</a><a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="SchoolDetails">详细</a></script>
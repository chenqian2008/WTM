<title>日志</title><div class="layui-card layadmin-header"><div class="layui-breadcrumb" lay-filter="breadcrumb"><a lay-href="">主页</a> <a><cite>Sample</cite></a> <a><cite>日志</cite></a></div></div><form id="wtForm_ecddcfb2a85d411da47e0b00ab2d1695" class="layui-form" method="post" lay-filter="wtForm_ecddcfb2a85d411da47e0b00ab2d1695form" action="/_Admin/ActionLog/Index?v=1.2.1"><div class="layui-collapse" style="margin-bottom:5px" lay-filter="94d62ac8add34aca81c23ffbf28d7f24"><div class="layui-colla-item"><h2 class="layui-colla-title">搜索条件<div style="text-align:right;margin-top:-43px" id="94d62ac8add34aca81c23ffbf28d7f24"><a href="javascript:void(0)" class="layui-btn layui-btn-sm" id="wtSearchBtn_ecddcfb2a85d411da47e0b00ab2d1695"><i class="layui-icon">&#xe615;</i>搜索</a> <button type="reset" class="layui-btn layui-btn-sm" id="wtResetBtn_ecddcfb2a85d411da47e0b00ab2d1695">重置</button></div></h2><div class="layui-colla-content layui-show"><div class="layui-row"><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_LogType" class="layui-form-label">类型:</label><div class="layui-input-block"><select name="Searcher.LogType" lay-filter="Searcher.LogType" wtm-name="Searcher.LogType" wtm-combo="MULTI_COMBO" id="ActionLogListVM_Searcher_LogType"><option value="">全部</option><option value="0">普通</option><option value="1">异常</option><option value="2">调试</option></select></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_ITCode" class="layui-form-label">ITCode:</label><div class="layui-input-block"><input type="text" name="Searcher.ITCode" placeholder="" class="layui-input" id="ActionLogListVM_Searcher_ITCode" lay-filter="ActionLogListVM_Searcher_ITCodefilter"></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_ActionUrl" class="layui-form-label">Url:</label><div class="layui-input-block"><input type="text" name="Searcher.ActionUrl" placeholder="" class="layui-input" id="ActionLogListVM_Searcher_ActionUrl" lay-filter="ActionLogListVM_Searcher_ActionUrlfilter"></div></div></div></div><div class="layui-row"><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_StartActionTime" class="layui-form-label">时间(起):</label><div class="layui-input-block"><input type="text" name="Searcher.StartActionTime" class="layui-input" id="ActionLogListVM_Searcher_StartActionTime" lay-filter="ActionLogListVM_Searcher_StartActionTimefilter"><script>layui.use(["laydate"],function(){layui.laydate.render({elem:"#ActionLogListVM_Searcher_StartActionTime",type:"date"})})</script></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_EndActionTime" class="layui-form-label">时间(止):</label><div class="layui-input-block"><input type="text" name="Searcher.EndActionTime" class="layui-input" id="ActionLogListVM_Searcher_EndActionTime" lay-filter="ActionLogListVM_Searcher_EndActionTimefilter"><script>layui.use(["laydate"],function(){layui.laydate.render({elem:"#ActionLogListVM_Searcher_EndActionTime",type:"date"})})</script></div></div></div><div class="layui-col-md4"><div class="layui-form-item"><label for="ActionLogListVM_Searcher_IP" class="layui-form-label">IP:</label><div class="layui-input-block"><input type="text" name="Searcher.IP" placeholder="" class="layui-input" id="ActionLogListVM_Searcher_IP" lay-filter="ActionLogListVM_Searcher_IPfilter"></div></div></div></div></div></div></div></form><script>layui.use(["table","element"],function(){var e=layui.table;layui.element.init(),$("#94d62ac8add34aca81c23ffbf28d7f24 .layui-btn").on("click",function(e){e.stopPropagation()}),$("#wtResetBtn_ecddcfb2a85d411da47e0b00ab2d1695").on("click",function(e){var a=$("#"+this.form.id+" input[wtm-tag=wtmselector]");if(a&&0<a.length)for(i=0;i<a.length;i++)a[i].remove()}),$("#wtSearchBtn_ecddcfb2a85d411da47e0b00ab2d1695").on("click",function(){e.reload("wtTable_ecddcfb2a85d411da47e0b00ab2d1695",{where:$.extend(wtVar_ecddcfb2a85d411da47e0b00ab2d1695.config.where,ff.GetSearchFormData("wtForm_ecddcfb2a85d411da47e0b00ab2d1695","")),done:function(e,a,d){if(null==this.height){var i=$("#wtTable_ecddcfb2a85d411da47e0b00ab2d1695 + .layui-table-view");i.css("overflow","hidden").addClass("donotuse_fill donotuse_pdiv"),i.children(".layui-table-box").addClass("donotuse_fill donotuse_pdiv").css("height","543px"),i.find(".layui-table-main").addClass("donotuse_fill"),i.find(".layui-table-header").css("min-height","40px"),ff.triggerResize()}}})}),layui.element.on("collapse(94d62ac8add34aca81c23ffbf28d7f24)",function(e){ff.triggerResize()})})</script><script>layui.use(["form","formSelects"],function(){for(var e=layui.formSelects,a=(layui.form.render(null,"wtForm_ecddcfb2a85d411da47e0b00ab2d1695form"),$(".layui-form[lay-filter='wtForm_ecddcfb2a85d411da47e0b00ab2d1695form'] select[wtm-combo='MULTI_COMBO']")),l=0;l<a.length;l++){var r=a[l].attributes["lay-filter"].value,t=[],o=$('input[name="'+r+'"]');for(l=0;l<o.length;l++)t.push({name:o[l].attributes.text.value,val:o[l].value});e.on({layFilter:r,left:"",right:"",separator:",",arr:t,selectFunc:null})}})</script><div style="text-align:right;padding-bottom:10px;padding-top:5px;margin-right:15px"><a href="javascript:void(0)" onclick='wtToolBarFunc_wtTable_ecddcfb2a85d411da47e0b00ab2d1695({event:"_FrameworkGetExportExcel"})' class="layui-btn layui-btn-sm"><i class="layui-icon layui-icon-download-circle"></i>导出Excel</a></div><table id="wtTable_ecddcfb2a85d411da47e0b00ab2d1695" lay-filter="wtTable_ecddcfb2a85d411da47e0b00ab2d1695"></table><script>layui.use(["admin","contlist","table"],function(){var r=layui.table,t=(layui.layer,{elem:"#wtTable_ecddcfb2a85d411da47e0b00ab2d1695",id:"wtTable_ecddcfb2a85d411da47e0b00ab2d1695",autoSort:!1,totalRow:!1,url:"/_Framework/GetPagingData",where:{_DONOT_USE_VMNAME:"WalkingTec.Mvvm.Mvc.Admin.ViewModels.ActionLogVMs.ActionLogListVM, WalkingTec.Mvvm.Mvc.Admin",_DONOT_USE_CS:"default",SearcherMode:0,"Searcher.ITCode":null,"Searcher.ActionUrl":null,"Searcher.LogType":null,"Searcher.StartActionTime":null,"Searcher.EndActionTime":null,"Searcher.IP":null,"Searcher.Session":{SessionId:"7f5d9420-dc2d-cbaa-daef-e1c301f7f29a"},"Searcher.ParentId":null,"Searcher.IsValid":null},method:"post",loading:!0,request:{pageName:"Searcher.Page",limitName:"Searcher.Limit"},response:{statusName:"Code",statusCode:200,msgName:"Msg",countName:"Count",dataName:"Data"},page:!0,limit:20,limits:[10,20,50,80,100,150,200],cols:[[{type:"checkbox",width:45,rowspan:1,fixed:"left",align:"center",totalRowText:"合计："},{type:"numbers",width:45,rowspan:1,fixed:"left",align:"center"},{field:"LogType",title:"类型",width:80,align:"center",templet:function(e){var l="",o="",r="LogType_"+e.LAY_INDEX;return null!=e.LogType__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.LogType__bgcolor+"');<\/script>"),null!=e.LogType__forecolor&&(l="color:"+e.LogType__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.LogType.replace(/\"/g,"'")+o+"</div>"}},{field:"ModuleName",title:"模块",width:120,align:"left",templet:function(e){var l="",o="",r="ModuleName_"+e.LAY_INDEX;return null!=e.ModuleName__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.ModuleName__bgcolor+"');<\/script>"),null!=e.ModuleName__forecolor&&(l="color:"+e.ModuleName__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.ModuleName.replace(/\"/g,"'")+o+"</div>"}},{field:"ActionName",title:"动作",width:120,align:"left",templet:function(e){var l="",o="",r="ActionName_"+e.LAY_INDEX;return null!=e.ActionName__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.ActionName__bgcolor+"');<\/script>"),null!=e.ActionName__forecolor&&(l="color:"+e.ActionName__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.ActionName.replace(/\"/g,"'")+o+"</div>"}},{field:"ITCode",title:"ITCode",width:120,align:"left",templet:function(e){var l="",o="",r="ITCode_"+e.LAY_INDEX;return null!=e.ITCode__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.ITCode__bgcolor+"');<\/script>"),null!=e.ITCode__forecolor&&(l="color:"+e.ITCode__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.ITCode.replace(/\"/g,"'")+o+"</div>"}},{field:"ActionUrl",title:"Url",width:200,align:"left",templet:function(e){var l="",o="",r="ActionUrl_"+e.LAY_INDEX;return null!=e.ActionUrl__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.ActionUrl__bgcolor+"');<\/script>"),null!=e.ActionUrl__forecolor&&(l="color:"+e.ActionUrl__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.ActionUrl.replace(/\"/g,"'")+o+"</div>"}},{field:"ActionTime",title:"操作时间",width:200,sort:!0,align:"center",templet:function(e){var l="",o="",r="ActionTime_"+e.LAY_INDEX;return null!=e.ActionTime__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.ActionTime__bgcolor+"');<\/script>"),null!=e.ActionTime__forecolor&&(l="color:"+e.ActionTime__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.ActionTime.replace(/\"/g,"'")+o+"</div>"}},{field:"Duration",title:"耗时(s)",width:100,sort:!0,align:"center",templet:function(e){var l="",o="",r="Duration_"+e.LAY_INDEX;return null!=e.Duration__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.Duration__bgcolor+"');<\/script>"),null!=e.Duration__forecolor&&(l="color:"+e.Duration__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.Duration.replace(/\"/g,"'")+o+"</div>"}},{field:"IP",title:"IP",width:120,align:"left",templet:function(e){var l="",o="",r="IP_"+e.LAY_INDEX;return null!=e.IP__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.IP__bgcolor+"');<\/script>"),null!=e.IP__forecolor&&(l="color:"+e.IP__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.IP.replace(/\"/g,"'")+o+"</div>"}},{field:"Remark",title:"备注",align:"left",templet:function(e){var l="",o="",r="Remark_"+e.LAY_INDEX;return null!=e.Remark__bgcolor&&(o="<script>$('#"+r+"').closest('td').css('background-color','"+e.Remark__bgcolor+"');<\/script>"),null!=e.Remark__forecolor&&(l="color:"+e.Remark__forecolor+";"),'<div style="'+l+'" id="'+r+'">'+e.Remark.replace(/\"/g,"'")+o+"</div>"}},{toolbar:"#wtToolBar_ecddcfb2a85d411da47e0b00ab2d1695",title:"操作",width:120,fixed:"right",align:"center"}]],even:!0,done:function(e,l,o){var r=$("#wtTable_ecddcfb2a85d411da47e0b00ab2d1695 + .layui-table-view");r.find("table");r.find("table").css("border-collapse","separate"),r.css("overflow","hidden").addClass("donotuse_fill donotuse_pdiv"),r.children(".layui-table-box").addClass("donotuse_fill donotuse_pdiv").css("height","543px"),r.find(".layui-table-main").addClass("donotuse_fill"),r.find(".layui-table-header").css("min-height","40px"),ff.triggerResize()}});wtVar_ecddcfb2a85d411da47e0b00ab2d1695=r.render(t),r.on("tool(wtTable_ecddcfb2a85d411da47e0b00ab2d1695)",function(e){var l=e.data,o=e.event;switch(e.tr,o){case"_AdminActionLogDetails":var r=!1,t="/_Admin/ActionLog/Details?1=1",c=[];if(null==l||null==l||null==l.ID||null==l.ID){if(0==(i=ff.GetSelections("wtTable_ecddcfb2a85d411da47e0b00ab2d1695")).length)return void layui.layer.msg("请选择一行");if(1<i.length)return void layui.layer.msg("最多只能选择一行");t=t+"&id="+i[0];var a=ff.GetSelectionData("wtTable_ecddcfb2a85d411da47e0b00ab2d1695");null!=a&&0<a.length&&(t=ff.concatWhereStr(t,c,a[0]))}else t=t+"&id="+l.ID,t=ff.concatWhereStr(t,c,l);ff.OpenDialog(t,"9037e31379fe453d962e32e56a396cb3","详细",800,null,!0===r&&null!=i?{Ids:i}:void 0);break;case"_FrameworkGetExportExcel":r=!1,t="/_Framework/GetExportExcel?1=1&_DONOT_USE_VMNAME=WalkingTec.Mvvm.Mvc.Admin.ViewModels.ActionLogVMs.ActionLogListVM, WalkingTec.Mvvm.Mvc.Admin",c=null;var i=ff.GetSelections("wtTable_ecddcfb2a85d411da47e0b00ab2d1695");r=!0,ff.DownloadExcelOrPdf(t,"wtForm_ecddcfb2a85d411da47e0b00ab2d1695",{_DONOT_USE_VMNAME:"WalkingTec.Mvvm.Mvc.Admin.ViewModels.ActionLogVMs.ActionLogListVM, WalkingTec.Mvvm.Mvc.Admin",_DONOT_USE_CS:"default",SearcherMode:0,"Searcher.ITCode":null,"Searcher.ActionUrl":null,"Searcher.LogType":null,"Searcher.StartActionTime":null,"Searcher.EndActionTime":null,"Searcher.IP":null,"Searcher.Session":{SessionId:"7f5d9420-dc2d-cbaa-daef-e1c301f7f29a"},"Searcher.ParentId":null,"Searcher.IsValid":null},i)}}),r.on("sort(wtTable_ecddcfb2a85d411da47e0b00ab2d1695)",function(e){var l={};l["Searcher.SortInfo.Property"]=e.field,l["Searcher.SortInfo.Direction"]=e.type.replace(e.type[0],e.type[0].toUpperCase());var o=$.extend(t.where,l);r.reload("wtTable_ecddcfb2a85d411da47e0b00ab2d1695",{initSort:e,where:o})})})</script><script type="text/html" id="wtToolBar_ecddcfb2a85d411da47e0b00ab2d1695"><a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="_AdminActionLogDetails">详细</a></script>
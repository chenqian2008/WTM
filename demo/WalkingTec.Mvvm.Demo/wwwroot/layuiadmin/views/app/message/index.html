<title>消息中心</title><div class="layui-card layadmin-header"><div class="layui-breadcrumb" lay-filter="breadcrumb"><a lay-href="">主页</a> <a><cite>消息中心</cite></a></div></div><div class="layui-fluid" id="LAY-app-message"><div class="layui-card"><div class="layui-tab layui-tab-brief"><ul class="layui-tab-title"><li class="layui-this">全部消息</li><li>通知<span class="layui-badge">6</span></li><li>私信</li></ul><div class="layui-tab-content"><div class="layui-tab-item layui-show"><div class="LAY-app-message-btns" style="margin-bottom:10px"><button class="layui-btn layui-btn-primary layui-btn-sm" data-type="all" data-events="del">删除</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="all" data-events="ready">标记已读</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="all" data-events="readyAll">全部已读</button></div><table id="LAY-app-message-all" lay-filter="LAY-app-message-all"></table></div><div class="layui-tab-item"><div class="LAY-app-message-btns" style="margin-bottom:10px"><button class="layui-btn layui-btn-primary layui-btn-sm" data-type="notice" data-events="del">删除</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="notice" data-events="ready">标记已读</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="notice" data-events="readyAll">全部已读</button></div><table id="LAY-app-message-notice" lay-filter="LAY-app-message-notice"></table></div><div class="layui-tab-item"><div class="LAY-app-message-btns" style="margin-bottom:10px"><button class="layui-btn layui-btn-primary layui-btn-sm" data-type="direct" data-events="del">删除</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="direct" data-events="ready">标记已读</button> <button class="layui-btn layui-btn-primary layui-btn-sm" data-type="direct" data-events="readyAll">全部已读</button></div><table id="LAY-app-message-direct" lay-filter="LAY-app-message-direct"></table></div></div></div></div></div><script>layui.use(["admin","table","util"],function(){var i=layui.$,l=(layui.admin,layui.table),s=(layui.element,{all:{text:"全部消息",id:"LAY-app-message-all"},notice:{text:"通知",id:"LAY-app-message-notice"},direct:{text:"私信",id:"LAY-app-message-direct"}}),e=function(e){return'<a lay-href="layuiadmin/views/app/message/detail.html/id='+e.id+'">'+e.title};l.render({elem:"#LAY-app-message-all",url:"./json/message/all.js",page:!0,response:{statusName:"Code",statusCode:200,msgName:"Msg",countName:"count",dataName:"Data"},cols:[[{type:"checkbox",fixed:"left"},{field:"title",title:"标题内容",minWidth:300,templet:e},{field:"time",title:"时间",width:170,templet:"<div>{{ layui.util.timeAgo(d.time) }}</div>"}]],skin:"line"}),l.render({elem:"#LAY-app-message-notice",url:"./json/message/notice.js",page:!0,response:{statusName:"Code",statusCode:200,msgName:"Msg",countName:"count",dataName:"Data"},cols:[[{type:"checkbox",fixed:"left"},{field:"title",title:"标题内容",minWidth:300,templet:e},{field:"time",title:"时间",width:170,templet:"<div>{{ layui.util.timeAgo(d.time) }}</div>"}]],skin:"line"}),l.render({elem:"#LAY-app-message-direct",url:"./json/message/direct.js",page:!0,response:{statusName:"Code",statusCode:200,msgName:"Msg",countName:"count",dataName:"Data"},cols:[[{type:"checkbox",fixed:"left"},{field:"title",title:"标题内容",minWidth:300,templet:e},{field:"time",title:"时间",width:170,templet:"<div>{{ layui.util.timeAgo(d.time) }}</div>"}]],skin:"line"});var d={del:function(e,t){var a=s[t];if(0===l.checkStatus(a.id).data.length)return layer.msg("未选中行");layer.confirm("确定删除选中的数据吗？",function(){layer.msg("删除成功",{icon:1}),l.reload(a.id)})},ready:function(e,t){var a=s[t];if(0===l.checkStatus(a.id).data.length)return layer.msg("未选中行");layer.msg("标记已读成功",{icon:1}),l.reload(a.id)},readyAll:function(e,t){var a=s[t];layer.msg(a.text+"：全部已读",{icon:1})}};i(".LAY-app-message-btns .layui-btn").on("click",function(){var e=i(this),t=e.data("events"),a=e.data("type");d[t]&&d[t].call(this,e,a)})})</script>
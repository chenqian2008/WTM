{"remainingRequest":"C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\babel-loader\\lib\\index.js??ref--4-oneOf-1-1!C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\rc-calendar\\es\\RangeCalendar.js","dependencies":[{"path":"C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\rc-calendar\\es\\RangeCalendar.js","mtime":499162500000},{"path":"C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n\n  return arr;\n}\n\nfunction onInputSelect(direction, value) {\n  if (!value) {\n    return;\n  }\n\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue);\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date']\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState = {\n        mode: nextProps.mode\n      };\n    }\n\n    return newState;\n  }; // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month(); // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\n\n    var extraFooter = props.renderFooter();\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n      clearIcon: clearIcon\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, seperator), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true,\n      clearIcon: clearIcon\n    }))), React.createElement('div', {\n      className: cls\n    }, showToday || props.timePicker || showOkButton || extraFooter ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, extraFooter, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker,\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate; // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      } // Find origin hover time on value index\n\n\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n\n        return;\n\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n\n          event.preventDefault();\n          return;\n        }\n\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({\n            hoverValue: []\n          });\n        }\n\n        return hoverValue;\n      }\n\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n\n    _this2.setState({\n      value: [startValue, endValue]\n    });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputSelect = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [mode, state.mode[1]];\n\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n    var newMode = [state.mode[0], mode];\n\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var value = _this2.state.value[0];\n    var selectedValue = _this2.state.selectedValue; // keep selectedTime when select date\n\n    if (selectedValue[0] && _this2.props.timePicker) {\n      value = value.clone();\n      syncTime(selectedValue[0], value);\n    }\n\n    if (_this2.state.showTimePicker && selectedValue[0]) {\n      return selectedValue[0];\n    }\n\n    return value;\n  };\n\n  this.getEndValue = function () {\n    var _state4 = _this2.state,\n        value = _state4.value,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month'); // keep selectedTime when select date\n\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n\n    if (showTimePicker) {\n      return selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state5 = _this2.state,\n        selectedValue = _state5.selectedValue,\n        value = _state5.value;\n    var disabledTime = _this2.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone(); // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n\n          return olddisabledSeconds;\n        }\n      };\n    }\n\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    } // 尚未选择过时间，直接输入的话\n\n\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n\n    _this2.props.onChange(selectedValue);\n\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n\n      _this2.fireHoverValueChange([]);\n\n      _this2.props.onSelect(selectedValue);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n\n    if (!('hoverValue' in props)) {\n      _this2.setState({\n        hoverValue: hoverValue\n      });\n    }\n\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isSameOrAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isSameOrBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\nexport default commonMixinWrapper(RangeCalendar);",{"version":3,"sources":["C:\\Users\\liuli\\source\\repos\\github\\WalkingTec.Mvvm\\WebApplication2\\ClientApp\\node_modules\\rc-calendar\\es\\RangeCalendar.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","moment","classnames","polyfill","KeyCode","CalendarPart","TodayButton","OkButton","TimePickerButton","commonMixinWrapper","propType","defaultProp","syncTime","getTodayTime","isAllowedDate","goTime","goStartMonth","goEndMonth","includesTime","noop","isEmptyArray","arr","Array","isArray","length","every","i","isArraysEqual","a","b","getValueFromSelectedValue","selectedValue","start","end","newEnd","isSame","clone","add","normalizeAnchor","props","init","defaultSelectedValue","value","defaultValue","normalizedValue","generateOptions","extraOptionGen","concat","indexOf","push","onInputSelect","direction","originalValue","state","index","compare","showTimePicker","undefined","fireSelectValueChange","RangeCalendar","_React$Component","_this","call","_initialiseProps","prevSelectedValue","firstSelectedValue","hoverValue","mode","getDerivedStateFromProps","nextProps","newState","prototype","render","_className","_classnames","prefixCls","dateInputPlaceholder","seperator","timePicker","showOk","locale","showClear","showToday","type","clearIcon","className","visible","showWeekNumber","classes","newProps","onSelect","onDayHover","placeholder1","placeholder2","showOkButton","cls","startValue","getStartValue","endValue","getEndValue","todayTime","thisMonth","month","thisYear","year","isTodayInView","nextMonthOfStart","isClosestMonths","extraFooter","renderFooter","createElement","ref","saveRoot","style","tabIndex","onKeyDown","renderSidebar","role","title","clear","onClick","onMouseLeave","onDatePanelLeave","onMouseEnter","onDatePanelEnter","disabledTime","disabledStartTime","disabledMonth","disabledStartMonth","format","getFormat","placeholder","onStartInputSelect","onValueChange","onStartValueChange","onPanelChange","onStartPanelChange","showDateInput","enablePrev","enableNext","isMonthYearPanelShow","timePickerDisabledTime","getEndDisableTime","onEndInputSelect","onEndValueChange","onEndPanelChange","disabledEndTime","disabledEndMonth","disabled","onToday","text","backToToday","onOpenTimePicker","onCloseTimePicker","timePickerDisabled","hasSelectedValue","onOk","okDisabled","isAllowedDateAndTime","Component","propTypes","string","any","arrayOf","oneOf","bool","array","func","object","onChange","onHoverChange","oneOfType","onClear","disabledDate","node","defaultProps","_this2","fireHoverValueChange","_state","nextSelectedValue","event","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","_state2","_props","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","miss","some","ht","newValue","slice","sort","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","time","_newValue","preventDefault","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","lastValue","_state3","setState","_len","arguments","oargs","_key","args","apply","_len2","_key2","leftValue","rightValue","newMode","_state4","_state5","userSettingDisabledTime","hours","hour","minutes","minute","second","_disabledHours","disabledHours","_disabledMinutes","disabledMinutes","_disabledSeconds","disabledSeconds","oldDisabledMinutes","olddisabledSeconds","v1","v2","diff","direct","timePickerDefaultValue","isSameOrAfter","isSameOrBefore"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\n\nfunction noop() {}\n\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\n\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n      end = selectedValue[1];\n\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\n\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\n\nfunction onInputSelect(direction, value) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue);\n}\n\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date']\n    };\n    return _this;\n  }\n\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState = { mode: nextProps.mode };\n    }\n    return newState;\n  };\n\n  // get disabled hours for second picker\n\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n\n    var props = this.props,\n        state = this.state;\n    var prefixCls = props.prefixCls,\n        dateInputPlaceholder = props.dateInputPlaceholder,\n        seperator = props.seperator,\n        timePicker = props.timePicker,\n        showOk = props.showOk,\n        locale = props.locale,\n        showClear = props.showClear,\n        showToday = props.showToday,\n        type = props.type,\n        clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n        selectedValue = state.selectedValue,\n        mode = state.mode,\n        showTimePicker = state.showTimePicker;\n\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n\n    // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\n\n    var extraFooter = props.renderFooter();\n\n    return React.createElement(\n      'div',\n      {\n        ref: this.saveRoot,\n        className: classes,\n        style: props.style,\n        tabIndex: '0',\n        onKeyDown: this.onKeyDown\n      },\n      props.renderSidebar(),\n      React.createElement(\n        'div',\n        { className: prefixCls + '-panel' },\n        showClear && selectedValue[0] && selectedValue[1] ? React.createElement(\n          'a',\n          {\n            role: 'button',\n            title: locale.clear,\n            onClick: this.clear\n          },\n          clearIcon || React.createElement('span', { className: prefixCls + '-clear-btn' })\n        ) : null,\n        React.createElement(\n          'div',\n          {\n            className: prefixCls + '-date-panel',\n            onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n            onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n          },\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'left',\n            disabledTime: this.disabledStartTime,\n            disabledMonth: this.disabledStartMonth,\n            format: this.getFormat(),\n            value: startValue,\n            mode: mode[0],\n            placeholder: placeholder1,\n            onInputSelect: this.onStartInputSelect,\n            onValueChange: this.onStartValueChange,\n            onPanelChange: this.onStartPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker,\n            enablePrev: true,\n            enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n            clearIcon: clearIcon\n          })),\n          React.createElement(\n            'span',\n            { className: prefixCls + '-range-middle' },\n            seperator\n          ),\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\n            hoverValue: hoverValue,\n            direction: 'right',\n            format: this.getFormat(),\n            timePickerDisabledTime: this.getEndDisableTime(),\n            placeholder: placeholder2,\n            value: endValue,\n            mode: mode[1],\n            onInputSelect: this.onEndInputSelect,\n            onValueChange: this.onEndValueChange,\n            onPanelChange: this.onEndPanelChange,\n            showDateInput: this.props.showDateInput,\n            timePicker: timePicker,\n            showTimePicker: showTimePicker,\n            disabledTime: this.disabledEndTime,\n            disabledMonth: this.disabledEndMonth,\n            enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n            enableNext: true,\n            clearIcon: clearIcon\n          }))\n        ),\n        React.createElement(\n          'div',\n          { className: cls },\n          showToday || props.timePicker || showOkButton || extraFooter ? React.createElement(\n            'div',\n            { className: prefixCls + '-footer-btn' },\n            extraFooter,\n            showToday ? React.createElement(TodayButton, _extends({}, props, {\n              disabled: isTodayInView,\n              value: state.value[0],\n              onToday: this.onToday,\n              text: locale.backToToday\n            })) : null,\n            props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n              showTimePicker: showTimePicker,\n              onOpenTimePicker: this.onOpenTimePicker,\n              onCloseTimePicker: this.onCloseTimePicker,\n              timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n            })) : null,\n            showOkButton ? React.createElement(OkButton, _extends({}, props, {\n              onOk: this.onOk,\n              okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n            })) : null\n          ) : null\n        )\n      )\n    );\n  };\n\n  return RangeCalendar;\n}(React.Component);\n\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n        selectedValue = _state.selectedValue,\n        prevSelectedValue = _state.prevSelectedValue,\n        firstSelectedValue = _state.firstSelectedValue;\n\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n\n    var keyCode = event.keyCode;\n\n    var ctrlKey = event.ctrlKey || event.metaKey;\n\n    var _state2 = _this2.state,\n        selectedValue = _state2.selectedValue,\n        hoverValue = _state2.hoverValue,\n        firstSelectedValue = _state2.firstSelectedValue,\n        value = _state2.value;\n    var _props = _this2.props,\n        onKeyDown = _props.onKeyDown,\n        disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this2.fireValueChange(_newValue);\n        }\n      }\n\n      event.preventDefault();\n\n      return nextHoverTime;\n    };\n\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  };\n\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n        selectedValue = _state3.selectedValue,\n        firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({ hoverValue: [] });\n        }\n        return hoverValue;\n      }\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    _this2.fireHoverValueChange(hoverValue);\n\n    return hoverValue;\n  };\n\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    _this2.setState({ value: [startValue, endValue] });\n  };\n\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n\n  this.onStartInputSelect = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onEndInputSelect = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [mode, state.mode[1]];\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n        state = _this2.state;\n\n    var newMode = [state.mode[0], mode];\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n\n  this.getStartValue = function () {\n    var value = _this2.state.value[0];\n    var selectedValue = _this2.state.selectedValue;\n    // keep selectedTime when select date\n    if (selectedValue[0] && _this2.props.timePicker) {\n      value = value.clone();\n      syncTime(selectedValue[0], value);\n    }\n    if (_this2.state.showTimePicker && selectedValue[0]) {\n      return selectedValue[0];\n    }\n    return value;\n  };\n\n  this.getEndValue = function () {\n    var _state4 = _this2.state,\n        value = _state4.value,\n        selectedValue = _state4.selectedValue,\n        showTimePicker = _state4.showTimePicker;\n\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      return selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n    return endValue;\n  };\n\n  this.getEndDisableTime = function () {\n    var _state5 = _this2.state,\n        selectedValue = _state5.selectedValue,\n        value = _state5.value;\n    var disabledTime = _this2.props.disabledTime;\n\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  };\n\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  };\n\n  this.fireSelectValueChange = function (selectedValue, direct) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({ firstSelectedValue: selectedValue[0] });\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n    _this2.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      _this2.fireHoverValueChange([]);\n      _this2.props.onSelect(selectedValue);\n    }\n  };\n\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  };\n\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n    if (!('hoverValue' in props)) {\n      _this2.setState({ hoverValue: hoverValue });\n    }\n    props.onHoverChange(hoverValue);\n  };\n\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n    _this2.props.onClear();\n  };\n\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isSameOrAfter(value[1], 'month');\n  };\n\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n\n    return month.isSameOrBefore(value[0], 'month');\n  };\n};\n\npolyfill(RangeCalendar);\n\nexport default commonMixinWrapper(RangeCalendar);"]}]}